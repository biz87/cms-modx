# Официальный модуль приема платежей Robokassa для ModX Revolution Minishop2
Данный модуль позволяет добавить на сайт способ оплаты через Робокассу.
Для корректной работы модуля необходима регистрация в сервисе.

Порядок регистрации описан в [документации Robokassa](https://docs.robokassa.ru/#7844)

### Возможности
* Передача состава товаров в заказе для отправки чека клиенту и в налоговую (54-ФЗ);
* Приём платежей в тестовом режиме;
* Автоматическая смена статуса заказа;
* Поддержка продавцов из Казахстана;

### Совместимость
ModX Revolution v.2.5.8 и выше;

MiniShop2 v.2.4.12 и выше;

### Ручная установка

1. Загрузить в любую подпапку modx (например mspRobokassa)
2. Запустить http://your-domain.ru/mspRobokassa/_build/build.transport.php
3. Пакет должен появится в списке пакетов в разделе "Управление пакетами"

### Настройка модуля

1. Перейти в настройки модуля "Системные настройки" -> "minishop2" -> "Платежи".
В поиске по ключу указать "rbks".
2. Зайти в настройки модуля и указать обязательные данные:
    * Страна магазина
    * Идентификатор магазина
    * Пароль №1
    * Пароль №2
    * Фискализация Robokassa
    * Признак способа расчёта
    * Признак предмета расчёта
    * Налоговая ставка Robokassa

3. В личном кабинете Robokassa ("мои магазины" - "настройки" - "технические настройки") указать:

   * Result Url - http://вашсайт.ru/assets/components/minishop2/payment/robokassa.php (метод POST)
   * Success Url - http://вашсайт.ru/assets/components/minishop2/payment/robokassa.php?action=success (метод POST)
   * Fail Url - http://вашсайт.ru/assets/components/minishop2/payment/robokassa.php?action=failure (метод POST)

### Уведомления об оплате

Уведомление об оплате Robokassa отправляет автоматически, после успешного совершения платежа, на адрес Result URL, который был скопирован из настроек модуля и указан в технических настройках магазина.
При правильной настройке, заказ в CMS изменит статус автоматически.
